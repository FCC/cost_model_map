{% include header_frame.html %} 

<!-- 
<div id="title" class="container">
  <div class="content">
    <h3>Cost Model Map version 4.1.1 for Price-Cap Areas</h3>
  </div>
</div>
 -->

<div id="map-c" class="container">
  <div class="content">
    <div id="map"></div>
    <!-- <ul class="inline">
      <li><strong>Select Map:</strong></li>
      <li><a href='javascript:void(0)' id='cam411' class='sel active'>CAM v4.1.1 map</a></li>
      <li><a href='javascript:void(0)' id='cam411_10_768' class='sel inactive'>CAM v4.1.1 map 10/768</a></li>
    </ul> -->
    <p>&nbsp;</p>
    <p>&nbsp;</p>
  </div>
</div>



   
<script>
var map = L.mapbox.map('map', 'fcc.map-kzt95hy6', {attributionControl: false,maxZoom:10})
            .setView([38.82, -94.96], 4);
map.scrollWheelZoom.disable();

var hash = L.hash(map);
L.control.fullscreen().addTo(map);
var activeLayerGroup = new L.LayerGroup();
var cam411_TL = L.mapbox.tileLayer('fcc.h9d1v2t9')
                    .on('load',function(){/* REMOVE LEGEND  map.legendControl.addLegend(cam411_TL.getTileJSON().legend);*/
                                        cam411_TL.removeEventListener();})
var cam411_GL = L.mapbox.gridLayer('fcc.h9d1v2t9')
var cam411_GC = L.mapbox.gridControl(cam411_GL, {follow: true})//.addTo(map);
var tileName = "cam411";

activeLayerGroup.addLayer(cam411_TL);
activeLayerGroup.addLayer(cam411_GL);
activeLayerGroup.addLayer(cam411_GC);
activeLayerGroup.addTo(map,function(){console.log('done')});

var cam411_10_768_TL = L.mapbox.tileLayer('fcc.hjl40a4i');
var cam411_10_768_GL = L.mapbox.gridLayer('fcc.hjl40a4i');
var cam411_10_768_GC = L.mapbox.gridControl(cam411_10_768_GL, {follow: true});

var mapHd = {
  cam411: {
    title: 'Connect America Phase II – Initial Eligible Areas Map',
    description: 'This map identifies the areas that have been initially determined to be eligible for ongoing Phase II Connect America support, which are shown in dark green on the map.  The map displays the outputs of the adopted version of the Connect America Cost Model (CAM) (version 4.1.1), which calculates costs per location in all price cap carrier study areas for the entire country. Areas marked as “served” are reported as having Internet access of at least 3 Mbps downstream and 768 kbps upstream from an unsubsidized competitor.  The map is based on round 8 State Broadband Initiative Data (data as of June 2013).',
    legend: ''
  },
  cam411_10_768: {
    title: 'Cost Model 10/768 Map',
    description: 'The map displays the outputs of the CACM, which calculates costs per location for the entire country. Areas marked as “served” are believed to have Internet access of at least <strong>10 Mbps downstream and 768 kbps upstream</strong> from a cable or fixed-wireless provider (according to State Broadband Initiative data, round 7, data as of December 2012) that reports it provides voice service on FCC Form 477 and does not receive high-cost USF support.',
    legend: ''  
  }
}

d3.selectAll(".sel").on("click", function(){
  if (d3.select(this).classed("active")){
      //do nothing
  } else {
    // d3.select('.map-legend').remove();
    d3.selectAll(".sel").attr("class","sel inactive");
    d3.select(this).attr("class","sel active");
    
    tileName = d3.select(this).attr("id");
    activeLayerGroup.clearLayers();
     
    activeLayerGroup.addLayer(eval(tileName+"_TL"));
    activeLayerGroup.addLayer(eval(tileName+"_GL"));
    activeLayerGroup.addLayer(eval(tileName+"_GC"));
    
  
    d3.select('#map-hd').text(mapHd[this.id].title);
    d3.select('#map-desc').html(mapHd[this.id].description);
    // d3.select('#map-legend').html(mapHd[this.id].legend);   
  }
});
 
</script>

{% include footer_frame.html %}
